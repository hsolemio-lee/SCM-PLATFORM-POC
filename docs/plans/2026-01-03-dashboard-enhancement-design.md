# Dashboard Enhancement Design

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** 대시보드 콘텐츠 강화 - 차트 확대, 진입점 추가, 차트/테이블 토글, 파이프라인 요약 및 타임라인 추가

**Architecture:** 2열 레이아웃(차트+로그), Header에 대시보드 진입점, 파이프라인 요약 헤더, 사이드바 타임라인

**Tech Stack:** React, TypeScript, Tailwind CSS (기존 스택 유지)

---

## 1. 전체 레이아웃 변경

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [Pipeline Summary Header]                                              │
│  ████████████░░░░░░░░ 50% | DP ✓ | MP ● | FP ○ | TP ○    [Run All]     │
├─────────────────────────────────────────────────────┬───────────────────┤
│  DP - Demand Planning                    [Run DP]   │  ┌───────────────┐│
├─────────────────────────────────────────────────────┤  │ MP (idle)     ││
│  ┌─────┐ ┌─────┐ ┌─────┐                            │  │ 로그 미리보기 ││
│  │ KPI │ │ KPI │ │ KPI │  (한 줄 유지)              │  └───────────────┘│
│  └─────┘ └─────┘ └─────┘                            │  ┌───────────────┐│
├─────────────────────────────────────────────────────┤  │ FP (idle)     ││
│  ┌───────────────────┐  ┌───────────────────┐       │  │ 로그 미리보기 ││
│  │  Chart  [📊|📋]   │  │  Live Log         │       │  └───────────────┘│
│  │                   │  │                   │       │  ┌───────────────┐│
│  │  (50% 너비)       │  │  (50% 너비)       │       │  │ TP (idle)     ││
│  │  h-80 (320px)     │  │  h-80 (320px)     │       │  │ 로그 미리보기 ││
│  └───────────────────┘  └───────────────────┘       │  └───────────────┘│
│                                                     ├───────────────────┤
│                                                     │ [Timeline]        │
│                                                     │ • DP 완료 2분 전  │
│                                                     │ • MP 시작 1분 전  │
└─────────────────────────────────────────────────────┴───────────────────┘
```

### 변경 사항
- KPIs: 한 줄 유지
- 차트 + 로그: 세로 배치 → 가로 2열 배치 (각 50%, 높이 h-80)
- 차트 영역: 토글 버튼으로 Chart/Table 전환
- 상단: 파이프라인 요약 헤더 추가
- 사이드바 하단: 타임라인 추가

---

## 2. Header 변경 (대시보드 진입점)

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [🏠] NEXPRIME SCM        DP ─── MP ─── FP ─── TP        [Reset Demo]   │
└─────────────────────────────────────────────────────────────────────────┘
```

### 구현
1. **로고 클릭 가능** - "NEXPRIME SCM" 텍스트를 `<NavLink to="/">`로 감싸서 클릭 시 대시보드로 이동

2. **홈 아이콘 추가** - 로고 왼쪽에 `Home` 아이콘 (lucide-react) 배치
   - 대시보드(`/`)에 있을 때: 아이콘 활성화 스타일 (nexprime-cyan)
   - 다른 페이지에 있을 때: 비활성화 스타일 (white/40)

3. **호버 효과** - 로고와 아이콘 모두 호버 시 밝아지는 효과

---

## 3. 차트/테이블 토글

```
┌─────────────────────────────────────────────────────┐
│  Output                              [📊] [📋]      │
├─────────────────────────────────────────────────────┤
│                                                     │
│  [Chart 모드]         또는        [Table 모드]      │
│  - 기존 Recharts 차트              - DataTable 표시 │
│  - DP: 라인차트                    - 솔버 output    │
│  - MP: 바차트                        데이터 테이블  │
│  - FP: 간트차트                    - 정렬 가능      │
│  - TP: 지도                        - 스크롤 지원    │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 구현
1. **토글 버튼** - 우측 상단에 두 개의 아이콘 버튼
   - `BarChart3` 아이콘 (차트 모드)
   - `Table` 아이콘 (테이블 모드)
   - 선택된 모드는 `bg-nexprime-cyan/20` + `text-nexprime-cyan`
   - 비선택은 `text-white/40`

2. **테이블 데이터** - 기존 `stageTableData`의 output 데이터 활용
   - 각 Stage별 100+ 행 데이터 이미 존재
   - 기존 `DataTable` 컴포넌트 재사용

3. **상태 관리** - 로컬 state로 `viewMode: 'chart' | 'table'`

---

## 4. 파이프라인 요약 헤더

```
┌─────────────────────────────────────────────────────────────────────────┐
│  Pipeline Progress                                                      │
│  ████████████░░░░░░░░░░░░  50%                          [Run All]       │
│                                                                         │
│  ✓ DP (완료)  →  ● MP (실행중)  →  ○ FP (대기)  →  ○ TP (대기)         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 구현
1. **프로그레스 바** - 전체 파이프라인 진행률
   - 4개 Stage 중 완료된 수 / 4 × 100%
   - `bg-nexprime-cyan` 그라데이션 바

2. **Stage 상태 인디케이터**
   - `✓` (complete): 녹색 체크 아이콘 + "완료"
   - `●` (running): 시안 점 + pulse 애니메이션 + "실행중"
   - `○` (idle): 회색 원 + "대기"

3. **Run All 버튼** - 기존 버튼을 이 헤더로 이동 (중복 제거)

4. **스타일** - `bg-nexprime-dark` 카드, 상단에 고정

---

## 5. 타임라인 (사이드바 하단)

```
┌───────────────────┐
│  Recent Activity  │
│  ─────────────────│
│  ● MP 시작        │
│    방금 전        │
│  ✓ DP 완료        │
│    2분 전         │
│  ▶ DP 시작        │
│    5분 전         │
└───────────────────┘
```

### 구현
1. **이벤트 타입**
   - `▶` 시작 (play): `text-nexprime-cyan`
   - `✓` 완료 (check): `text-green-400`
   - `●` 실행중 (running): `text-nexprime-cyan` + pulse

2. **시간 표시** - 상대 시간 ("방금 전", "2분 전", "5분 전")

3. **상태 저장** - SCMContext에 `activityLog` 배열 추가
   ```typescript
   interface ActivityEvent {
     id: string;
     stage: SolverStage;
     type: 'start' | 'complete';
     timestamp: Date;
   }
   ```

4. **최대 표시** - 최근 5개 이벤트만 표시 (스크롤 없이)

---

## 6. 컴포넌트 구조

```
src/components/
├── layout/
│   └── Header.tsx                    # 수정: 홈 아이콘 + 로고 클릭 추가
├── dashboard/
│   ├── PipelineSummary.tsx           # 새로 생성
│   ├── MainSolverView.tsx            # 수정: 2열 레이아웃
│   ├── OutputPanel.tsx               # 새로 생성: 차트/테이블 토글
│   └── ActivityTimeline.tsx          # 새로 생성

src/context/
└── SCMContext.tsx                    # 수정: activityLog 추가
```

---

## 7. SCMContext 확장

```typescript
interface ActivityEvent {
  id: string;
  stage: SolverStage;
  type: 'start' | 'complete';
  timestamp: Date;
}

// 추가될 상태/함수
activityLog: ActivityEvent[];
```

- `runSolver` 호출 시 'start' 이벤트 추가
- 솔버 완료 시 'complete' 이벤트 추가
- 최대 10개 이벤트 유지 (오래된 것 자동 삭제)
